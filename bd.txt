-- Crear la base de datos "escuela" si no existe
CREATE DATABASE IF NOT EXISTS escola;
USE escola;

-- Tabla ROL
CREATE TABLE IF NOT EXISTS ROLES (
    id INT AUTO_INCREMENT PRIMARY KEY,
    rol VARCHAR(255) NOT NULL
);

-- Tabla USERS
CREATE TABLE IF NOT EXISTS USERS (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_rol INT ,
    nombre VARCHAR(255) NOT NULL,
    apellido VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    FOREIGN KEY (id_rol) REFERENCES ROLES(id)
   
);

-- Tabla ALUMNOS
CREATE TABLE IF NOT EXISTS ALUMNOS (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_user INT,
    FOREIGN KEY (id_user) REFERENCES USERS(id)
    
);

-- Tabla PROFESORES
CREATE TABLE IF NOT EXISTS PROFESORES (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_user INT,
    FOREIGN KEY (id_user) REFERENCES USERS(id)
    
);

-- Tabla MATRICULA
CREATE TABLE IF NOT EXISTS MATRICULA (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_asignatura INT NOT NULL,
    id_alumno INT NOT NULL,
    FOREIGN KEY (id_asignatura) REFERENCES ASIGNATURAS(id)
    FOREIGN KEY (id_alumno) REFERENCES ALUMNOS(ID),
    
);

-- Tabla ASIGNATURAS
CREATE TABLE IF NOT EXISTS ASIGNATURAS (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    id_profesor INT NOT NULL,
    FOREIGN KEY (id_profesor) REFERENCES PROFESORES(id)
);

-- Tabla NOTAS
CREATE TABLE IF NOT EXISTS NOTAS (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nota DECIMAL(10, 2) NOT NULL,
    id_alumno INT NOT NULL,
    id_profesor INT NOT NULL,
    id_asignatura INT NOT NULL,
    FOREIGN KEY (id_alumno) REFERENCES ALUMNOS(id),
    FOREIGN KEY (id_profesor) REFERENCES PROFESORES(id),
    FOREIGN KEY (id_asignatura) REFERENCES ASIGNATURAS(id)
);


-- INSERTAR DATOS A LAS TABLAS

NOTAS
insert into notas VALUES(1,8,5,2,3);
INSERT into notas VALUES(3,9,4,4,2);